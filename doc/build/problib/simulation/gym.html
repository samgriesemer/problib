<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.7.2" />
<title>problib.simulation.gym API documentation</title>
<meta name="description" content="" />
<link href='https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.0/normalize.min.css' rel='stylesheet'>
<link href='https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/8.0.0/sanitize.min.css' rel='stylesheet'>
<link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" rel="stylesheet">
<style>.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{font-weight:bold}#index h4 + ul{margin-bottom:.6em}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>problib.simulation.gym</code></h1>
</header>
<section id="section-intro">
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">from . import physics

class GymBase():
  &#39;&#39;&#39;Base gym class, outlines simple tick and game loop methods&#39;&#39;&#39;
  def __init__(self):
    self.state = None

  def tick(self):
    &#39;&#39;&#39;Execute single gym tick&#39;&#39;&#39;
    pass

  def draw(self):
    &#39;&#39;&#39;Draw objects&#39;&#39;&#39;
    pass

  def loop(self, ticks):
    &#39;&#39;&#39;Return gym loop, generator over specified numer of ticks&#39;&#39;&#39;
    for _ in range(ticks): 
      yield tick()

class Grid(GymBase):
  &#39;&#39;&#39;
  Naive implementation, simple velocity and position
  updates on body of defined point objects. Action space
  includes all real number within velocity ranges, and the state
  is the current set of physics entities and their 2D positions.
  &#39;&#39;&#39;
  def __init__(self, width, height, vxrng, vyrng, axrng=[0,0], ayrng=[0,0], entities=[]):
    # set initial entities (to be formalized later)
    self.width = width
    self.height = height
    self.vxrng = vxrng
    self.vyrng = vyrng
    self.axrng = axrng
    self.ayrng = ayrng

    # create internal agent-entity registry
    self.registry = {}

    # create underlying physics engine
    self.engine = physics.Engine(entities)

  @classmethod
  def random(cls, n, width, height, vxrng, vyrng, axrng, ayrng):
    &#39;&#39;&#39;
    Alternate constructor for random creation of entities
    NOTE: entities currently removed from constructor and
    dependent on agent registry
    &#39;&#39;&#39;
    entities = []
    for _ in range(n):
      e = physics.Entity.random((0, width), (0, height), vxrng, vyrng)
      entities.append(e)
    return cls(entities, width, height, vxrng, vyrng)

  def register_agent(self, agent):
    # create entity for agent
    entity = self.random_entity()
    self.engine.add(entity)

    # store entity-agent pair in registry
    self.registry[id(agent)] = id(entity)

  def remove_agent(self, aid):
    self.engine.remove(self.registry[aid])
    self.registry.pop(aid)

  def random_entity(self):
    return physics.Entity.random((0,self.width), (0,self.height), \
                          self.vxrng, self.vyrng, self.axrng, self.ayrng)

  def clip(self, val, rng):
    return min(max(val, rng[0]), rng[1])

  @property
  def state(self):
    return {aid: self.engine.entities[eid].__dict__ for aid, eid in self.registry.items()}

  def start(self):
    return self.state

  def tick(self, actions):
    &#39;&#39;&#39;
    Handles action requests to engine entities, returns resulting
    state. Note for multi-agent systems, `action` is a list of actions
    to be performed by each agent at the current step

    :actions: list of actions in form {&#39;action&#39;:&lt;str&gt;, &#39;aid&#39;:&lt;int&gt;, value:{&#39;x&#39;:&lt;int&gt;, &#39;y&#39;:&lt;int&gt;}}
    ::known actions:: [&#39;setv&#39;]
    &#39;&#39;&#39;
    # update entities and agents
    for action in actions:
      eid       = self.registry[action[&#39;aid&#39;]]
      entity    = self.engine.entities[eid]
      entity.vx = self.clip(action[&#39;val&#39;][&#39;vx&#39;], self.vxrng)
      entity.vy = self.clip(action[&#39;val&#39;][&#39;vy&#39;], self.vyrng)
      entity.ax = self.clip(action[&#39;val&#39;][&#39;ax&#39;], self.axrng)
      entity.ay = self.clip(action[&#39;val&#39;][&#39;ay&#39;], self.ayrng)

    # call physics tick
    self.engine.tick()
    return self.state</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="problib.simulation.gym.Grid"><code class="flex name class">
<span>class <span class="ident">Grid</span></span>
<span>(</span><span>width, height, vxrng, vyrng, axrng=[0, 0], ayrng=[0, 0], entities=[])</span>
</code></dt>
<dd>
<section class="desc"><p>Naive implementation, simple velocity and position
updates on body of defined point objects. Action space
includes all real number within velocity ranges, and the state
is the current set of physics entities and their 2D positions.</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class Grid(GymBase):
  &#39;&#39;&#39;
  Naive implementation, simple velocity and position
  updates on body of defined point objects. Action space
  includes all real number within velocity ranges, and the state
  is the current set of physics entities and their 2D positions.
  &#39;&#39;&#39;
  def __init__(self, width, height, vxrng, vyrng, axrng=[0,0], ayrng=[0,0], entities=[]):
    # set initial entities (to be formalized later)
    self.width = width
    self.height = height
    self.vxrng = vxrng
    self.vyrng = vyrng
    self.axrng = axrng
    self.ayrng = ayrng

    # create internal agent-entity registry
    self.registry = {}

    # create underlying physics engine
    self.engine = physics.Engine(entities)

  @classmethod
  def random(cls, n, width, height, vxrng, vyrng, axrng, ayrng):
    &#39;&#39;&#39;
    Alternate constructor for random creation of entities
    NOTE: entities currently removed from constructor and
    dependent on agent registry
    &#39;&#39;&#39;
    entities = []
    for _ in range(n):
      e = physics.Entity.random((0, width), (0, height), vxrng, vyrng)
      entities.append(e)
    return cls(entities, width, height, vxrng, vyrng)

  def register_agent(self, agent):
    # create entity for agent
    entity = self.random_entity()
    self.engine.add(entity)

    # store entity-agent pair in registry
    self.registry[id(agent)] = id(entity)

  def remove_agent(self, aid):
    self.engine.remove(self.registry[aid])
    self.registry.pop(aid)

  def random_entity(self):
    return physics.Entity.random((0,self.width), (0,self.height), \
                          self.vxrng, self.vyrng, self.axrng, self.ayrng)

  def clip(self, val, rng):
    return min(max(val, rng[0]), rng[1])

  @property
  def state(self):
    return {aid: self.engine.entities[eid].__dict__ for aid, eid in self.registry.items()}

  def start(self):
    return self.state

  def tick(self, actions):
    &#39;&#39;&#39;
    Handles action requests to engine entities, returns resulting
    state. Note for multi-agent systems, `action` is a list of actions
    to be performed by each agent at the current step

    :actions: list of actions in form {&#39;action&#39;:&lt;str&gt;, &#39;aid&#39;:&lt;int&gt;, value:{&#39;x&#39;:&lt;int&gt;, &#39;y&#39;:&lt;int&gt;}}
    ::known actions:: [&#39;setv&#39;]
    &#39;&#39;&#39;
    # update entities and agents
    for action in actions:
      eid       = self.registry[action[&#39;aid&#39;]]
      entity    = self.engine.entities[eid]
      entity.vx = self.clip(action[&#39;val&#39;][&#39;vx&#39;], self.vxrng)
      entity.vy = self.clip(action[&#39;val&#39;][&#39;vy&#39;], self.vyrng)
      entity.ax = self.clip(action[&#39;val&#39;][&#39;ax&#39;], self.axrng)
      entity.ay = self.clip(action[&#39;val&#39;][&#39;ay&#39;], self.ayrng)

    # call physics tick
    self.engine.tick()
    return self.state</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="problib.simulation.gym.GymBase" href="#problib.simulation.gym.GymBase">GymBase</a></li>
</ul>
<h3>Static methods</h3>
<dl>
<dt id="problib.simulation.gym.Grid.random"><code class="name flex">
<span>def <span class="ident">random</span></span>(<span>n, width, height, vxrng, vyrng, axrng, ayrng)</span>
</code></dt>
<dd>
<section class="desc"><p>Alternate constructor for random creation of entities
NOTE: entities currently removed from constructor and
dependent on agent registry</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@classmethod
def random(cls, n, width, height, vxrng, vyrng, axrng, ayrng):
  &#39;&#39;&#39;
  Alternate constructor for random creation of entities
  NOTE: entities currently removed from constructor and
  dependent on agent registry
  &#39;&#39;&#39;
  entities = []
  for _ in range(n):
    e = physics.Entity.random((0, width), (0, height), vxrng, vyrng)
    entities.append(e)
  return cls(entities, width, height, vxrng, vyrng)</code></pre>
</details>
</dd>
</dl>
<h3>Instance variables</h3>
<dl>
<dt id="problib.simulation.gym.Grid.state"><code class="name">var <span class="ident">state</span></code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def state(self):
  return {aid: self.engine.entities[eid].__dict__ for aid, eid in self.registry.items()}</code></pre>
</details>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="problib.simulation.gym.Grid.clip"><code class="name flex">
<span>def <span class="ident">clip</span></span>(<span>self, val, rng)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def clip(self, val, rng):
  return min(max(val, rng[0]), rng[1])</code></pre>
</details>
</dd>
<dt id="problib.simulation.gym.Grid.random_entity"><code class="name flex">
<span>def <span class="ident">random_entity</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def random_entity(self):
  return physics.Entity.random((0,self.width), (0,self.height), \
                        self.vxrng, self.vyrng, self.axrng, self.ayrng)</code></pre>
</details>
</dd>
<dt id="problib.simulation.gym.Grid.register_agent"><code class="name flex">
<span>def <span class="ident">register_agent</span></span>(<span>self, agent)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def register_agent(self, agent):
  # create entity for agent
  entity = self.random_entity()
  self.engine.add(entity)

  # store entity-agent pair in registry
  self.registry[id(agent)] = id(entity)</code></pre>
</details>
</dd>
<dt id="problib.simulation.gym.Grid.remove_agent"><code class="name flex">
<span>def <span class="ident">remove_agent</span></span>(<span>self, aid)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def remove_agent(self, aid):
  self.engine.remove(self.registry[aid])
  self.registry.pop(aid)</code></pre>
</details>
</dd>
<dt id="problib.simulation.gym.Grid.start"><code class="name flex">
<span>def <span class="ident">start</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def start(self):
  return self.state</code></pre>
</details>
</dd>
<dt id="problib.simulation.gym.Grid.tick"><code class="name flex">
<span>def <span class="ident">tick</span></span>(<span>self, actions)</span>
</code></dt>
<dd>
<section class="desc"><p>Handles action requests to engine entities, returns resulting
state. Note for multi-agent systems, <code>action</code> is a list of actions
to be performed by each agent at the current step</p>
<p>:actions: list of actions in form {'action':<str>, 'aid':<int>, value:{'x':<int>, 'y':<int>}}
::known actions:: ['setv']</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def tick(self, actions):
  &#39;&#39;&#39;
  Handles action requests to engine entities, returns resulting
  state. Note for multi-agent systems, `action` is a list of actions
  to be performed by each agent at the current step

  :actions: list of actions in form {&#39;action&#39;:&lt;str&gt;, &#39;aid&#39;:&lt;int&gt;, value:{&#39;x&#39;:&lt;int&gt;, &#39;y&#39;:&lt;int&gt;}}
  ::known actions:: [&#39;setv&#39;]
  &#39;&#39;&#39;
  # update entities and agents
  for action in actions:
    eid       = self.registry[action[&#39;aid&#39;]]
    entity    = self.engine.entities[eid]
    entity.vx = self.clip(action[&#39;val&#39;][&#39;vx&#39;], self.vxrng)
    entity.vy = self.clip(action[&#39;val&#39;][&#39;vy&#39;], self.vyrng)
    entity.ax = self.clip(action[&#39;val&#39;][&#39;ax&#39;], self.axrng)
    entity.ay = self.clip(action[&#39;val&#39;][&#39;ay&#39;], self.ayrng)

  # call physics tick
  self.engine.tick()
  return self.state</code></pre>
</details>
</dd>
</dl>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="problib.simulation.gym.GymBase" href="#problib.simulation.gym.GymBase">GymBase</a></b></code>:
<ul class="hlist">
<li><code><a title="problib.simulation.gym.GymBase.draw" href="#problib.simulation.gym.GymBase.draw">draw</a></code></li>
<li><code><a title="problib.simulation.gym.GymBase.loop" href="#problib.simulation.gym.GymBase.loop">loop</a></code></li>
</ul>
</li>
</ul>
</dd>
<dt id="problib.simulation.gym.GymBase"><code class="flex name class">
<span>class <span class="ident">GymBase</span></span>
</code></dt>
<dd>
<section class="desc"><p>Base gym class, outlines simple tick and game loop methods</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class GymBase():
  &#39;&#39;&#39;Base gym class, outlines simple tick and game loop methods&#39;&#39;&#39;
  def __init__(self):
    self.state = None

  def tick(self):
    &#39;&#39;&#39;Execute single gym tick&#39;&#39;&#39;
    pass

  def draw(self):
    &#39;&#39;&#39;Draw objects&#39;&#39;&#39;
    pass

  def loop(self, ticks):
    &#39;&#39;&#39;Return gym loop, generator over specified numer of ticks&#39;&#39;&#39;
    for _ in range(ticks): 
      yield tick()</code></pre>
</details>
<h3>Subclasses</h3>
<ul class="hlist">
<li><a title="problib.simulation.gym.Grid" href="#problib.simulation.gym.Grid">Grid</a></li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="problib.simulation.gym.GymBase.draw"><code class="name flex">
<span>def <span class="ident">draw</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"><p>Draw objects</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def draw(self):
  &#39;&#39;&#39;Draw objects&#39;&#39;&#39;
  pass</code></pre>
</details>
</dd>
<dt id="problib.simulation.gym.GymBase.loop"><code class="name flex">
<span>def <span class="ident">loop</span></span>(<span>self, ticks)</span>
</code></dt>
<dd>
<section class="desc"><p>Return gym loop, generator over specified numer of ticks</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def loop(self, ticks):
  &#39;&#39;&#39;Return gym loop, generator over specified numer of ticks&#39;&#39;&#39;
  for _ in range(ticks): 
    yield tick()</code></pre>
</details>
</dd>
<dt id="problib.simulation.gym.GymBase.tick"><code class="name flex">
<span>def <span class="ident">tick</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"><p>Execute single gym tick</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def tick(self):
  &#39;&#39;&#39;Execute single gym tick&#39;&#39;&#39;
  pass</code></pre>
</details>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="problib.simulation" href="index.html">problib.simulation</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="problib.simulation.gym.Grid" href="#problib.simulation.gym.Grid">Grid</a></code></h4>
<ul class="two-column">
<li><code><a title="problib.simulation.gym.Grid.clip" href="#problib.simulation.gym.Grid.clip">clip</a></code></li>
<li><code><a title="problib.simulation.gym.Grid.random" href="#problib.simulation.gym.Grid.random">random</a></code></li>
<li><code><a title="problib.simulation.gym.Grid.random_entity" href="#problib.simulation.gym.Grid.random_entity">random_entity</a></code></li>
<li><code><a title="problib.simulation.gym.Grid.register_agent" href="#problib.simulation.gym.Grid.register_agent">register_agent</a></code></li>
<li><code><a title="problib.simulation.gym.Grid.remove_agent" href="#problib.simulation.gym.Grid.remove_agent">remove_agent</a></code></li>
<li><code><a title="problib.simulation.gym.Grid.start" href="#problib.simulation.gym.Grid.start">start</a></code></li>
<li><code><a title="problib.simulation.gym.Grid.state" href="#problib.simulation.gym.Grid.state">state</a></code></li>
<li><code><a title="problib.simulation.gym.Grid.tick" href="#problib.simulation.gym.Grid.tick">tick</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="problib.simulation.gym.GymBase" href="#problib.simulation.gym.GymBase">GymBase</a></code></h4>
<ul class="">
<li><code><a title="problib.simulation.gym.GymBase.draw" href="#problib.simulation.gym.GymBase.draw">draw</a></code></li>
<li><code><a title="problib.simulation.gym.GymBase.loop" href="#problib.simulation.gym.GymBase.loop">loop</a></code></li>
<li><code><a title="problib.simulation.gym.GymBase.tick" href="#problib.simulation.gym.GymBase.tick">tick</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc"><cite>pdoc</cite> 0.7.2</a>.</p>
</footer>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad()</script>
</body>
</html>